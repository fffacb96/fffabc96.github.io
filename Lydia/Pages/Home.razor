@page "/"
@page "/{Painting}"
@using Lydia.Data

@inject IDialogService DialogService

<PageTitle>Elena Kokline</PageTitle>

<MudHidden Breakpoint="Breakpoint.MdAndDown">
    <Wide></Wide>
</MudHidden>

<MudHidden Breakpoint="Breakpoint.LgAndUp">
    <Mobile></Mobile>
</MudHidden>

@code {

    [Parameter] public string? Painting { get; set; }

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        
        Console.WriteLine(Painting);

        if (String.IsNullOrEmpty(Painting)) return;
        
        Console.WriteLine("1");
        
        var painting = Data.Paintings.FirstOrDefault(a => a.Key == Painting);

        if (painting == null) return;
        
        Console.WriteLine("2");
        
        var parameters = new DialogParameters<InquireImageCarouselDialog>
        {
            { x => x.Painting, painting }
        };

        var options = new DialogOptions { FullScreen = true, CloseButton = true, CloseOnEscapeKey = true };
        
        Console.WriteLine("3");
        
        DialogService.ShowAsync<InquireImageCarouselDialog>("", parameters, options);
    }

    [Parameter] public Painting Painting_ { get; set; }

    private Task OpenDialogAsync(double imageId)
    {
        var parameters = new DialogParameters<InquireImageCarouselDialog>
        {
            { x => x.ImageId, imageId },
            { x => x.Painting, Painting_ }
        };

        var options = new DialogOptions { FullScreen = true, CloseButton = true, CloseOnEscapeKey = true };

        return DialogService.ShowAsync<InquireImageCarouselDialog>("", parameters, options);
    }
}