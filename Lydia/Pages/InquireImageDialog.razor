@using Lydia.Components
@using Lydia.Data
@inject IDialogService DialogService

<MudDialog>
    <DialogContent>
        <MudStack>
            <MudButton @onclick="() => Submit()" Style="min-height: 800px">
                <MudImage Src="@Painting.File" Style="max-width: 100vw; max-height: 88vh" Class="m-auto"></MudImage>
            </MudButton>
            <MudStack Row="true" AlignItems="AlignItems.Stretch">
                <MudItem>
                <MudText Typo="Typo.h1">@Painting.Name</MudText>
                </MudItem>
                @if (Painting.Available)
                {
                    <MudSpacer></MudSpacer>
                    <MudItem>
                    <MudChip Text="green" Color="Color.Success" Value="@Color.Success">Available</MudChip>
                    </MudItem>
                    <MudItem>
                    <MudButton
                        @onclick="OpenDialogAsync"
                        Variant="Variant.Filled"
                        Color="Color.Primary"
                        EndIcon="@Icons.Material.Filled.QuestionMark">
                        Inquire
                    </MudButton>
                    </MudItem>
                }
            </MudStack>
        </MudStack>
    </DialogContent>
</MudDialog>

@code {
    [CascadingParameter] private IMudDialogInstance MudDialog { get; set; }

    private void Submit()
    {
        MudDialog.Close(DialogResult.Ok(true));
    }

    [Parameter] public double ImageId { get; set; }
    [Parameter] public Painting Painting { get; set; }

    public string GetImageFile()
    {
        return ImageId + ".webp";
    }


    private Task OpenDialogAsync()
    {
        var parameters = new DialogParameters<ContactForm>
        {
            { x => x.Painting, Painting }
        };

        var options = new DialogOptions { FullScreen = false, CloseButton = true, CloseOnEscapeKey = true };

        return DialogService.ShowAsync<ContactForm>("", parameters, options);
    }


}